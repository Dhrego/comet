import{$ as i,g as c}from"./index.C2O3cY4t.js";import"./_commonjsHelpers.CqkleIqs.js";var h="https://api.logsnag.com",g="/v1",u={LOG:h+g+"/log",IDENTIFY:h+g+"/identify",INSIGHT:h+g+"/insight",GROUP:h+"/v1/group"},d=class extends Error{message;constructor(t,a,r){super(`HTTP Error Response: ${t} ${a}`),this.message=this.createReadableString(r)}createReadableString(t){let a="[LogSnag] Failed to publish: ";return t&&t.validation&&Array.isArray(t.validation.body)?a+=t.validation.body.map(r=>r.message).join(", "):a+=": Please check our docs at https://docs.logsnag.com",a}toString(){return this.message}toJSON(){return{message:this.message}}};function y(t){return Math.abs(Date.now()-t)<Math.abs(Date.now()-t*1e3)}function b(t){if(t)return t instanceof Date&&(t=t.getTime()),y(t)&&(t=Math.floor(t/1e3)),t}var w=class{token;project;disabled=!1;constructor({token:t,project:a,disableTracking:r=!1}){this.token=t,this.project=a,this.disabled=r||!1}disableTracking(){this.disabled=!0}enableTracking(){this.disabled=!1}isTrackingDisabled(){return this.disabled}getProject(){return this.project}createAuthorizationHeader(){return`Bearer ${this.token}`}createHeaders(){return{"Content-Type":"application/json",Authorization:this.createAuthorizationHeader()}}get insight(){return{track:this.insightTrack.bind(this),increment:this.insightIncrement.bind(this)}}async track(t){if(this.isTrackingDisabled())return!0;let a=this.createHeaders(),r="POST";t.timestamp=b(t.timestamp);let s=JSON.stringify({...t,project:this.getProject()}),e=await fetch(u.LOG,{method:r,body:s,headers:a});if(!e.ok)throw new d(e.status,e.statusText,await e.json());return!0}async identify(t){if(this.isTrackingDisabled())return!0;let a=this.createHeaders(),r="POST",s=JSON.stringify({...t,project:this.getProject()}),e=await fetch(u.IDENTIFY,{method:r,body:s,headers:a});if(!e.ok)throw new d(e.status,e.statusText,await e.json());return!0}async group(t){if(this.isTrackingDisabled())return!0;let a=this.createHeaders(),r="POST",s=JSON.stringify({...t,project:this.getProject()}),e=await fetch(u.GROUP,{method:r,body:s,headers:a});if(!e.ok)throw new d(e.status,e.statusText,await e.json());return!0}async insightTrack(t){if(this.isTrackingDisabled())return!0;let a=this.createHeaders(),r="POST",s=JSON.stringify({...t,project:this.getProject()}),e=await fetch(u.INSIGHT,{method:r,body:s,headers:a});if(!e.ok)throw new d(e.status,e.statusText,await e.json());return!0}async insightIncrement(t){if(this.isTrackingDisabled())return!0;let a=this.createHeaders(),r="PATCH",s=JSON.stringify({project:this.getProject(),icon:t.icon,title:t.title,value:{$inc:t.value}}),e=await fetch(u.INSIGHT,{method:r,body:s,headers:a});if(!e.ok)throw new d(e.status,e.statusText,await e.json());return!0}};const m=window.innerWidth;i(document).ready(function(){const t=()=>{i("input,textarea").val("")},a=(s,e)=>{c.set(s,{display:"flex",opacity:1});const o=e<=768?{top:"10px"}:{bottom:"10px"},n=e<=768?{top:"-10%"}:{bottom:"-10%"},l=e<=768?.5:.3;c.to(s,{...o,duration:l,ease:"power1.in",onComplete:()=>{c.delayedCall(3,()=>{c.to(s,{...n,opacity:0,duration:.8,ease:"power1.out",onComplete:()=>{c.set(s,{delay:2,display:"none"})}})})}})},r=s=>s.length===0?s:s.charAt(0).toUpperCase()+s.slice(1).toLowerCase();i("#emailForm").on("submit",async function(s){s.preventDefault();const e=r(i("#inputFullname").val()),o=i("#inputEmail").val(),n=r(i("#inputCompany").val()),l=r(i("#inputDetails").val()),p=new w({token:"27f2c9d17e77fc5dbb62d40c2a1f904b",project:"portfolio"});try{await p.track({channel:"messages",event:n?`${e} from ${n}`:`${e} sent you a message`,user_id:o,icon:"✉️",notify:!0,tags:{email:o,company:n||"N/A"},description:l}),await p.identify({user_id:o,properties:{name:e,email:o,company:n||"N/A"}}),a(i(".success_msg"),m)}catch(f){console.log(f),a(i(".error_msg"),m)}t()})});
